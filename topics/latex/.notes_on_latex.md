# Notes on Latex

## Contents

- [Notes on Latex](#notes-on-latex)
  - [Contents](#contents)
  - [Installation](#installation)
  - [Useful links](#useful-links)
  - [Document template](#document-template)
  - [Compiling a PDF](#compiling-a-pdf)
  - [Compiling to PNG](#compiling-to-png)
  - [Description of packages](#description-of-packages)
  - [Maths formatting](#maths-formatting)
    - [Underset text](#underset-text)
  - [Text formatting](#text-formatting)
    - [Use a fixed width font](#use-a-fixed-width-font)

## Installation

Two major distributions of Latex are [TeX Live](https://www.tug.org/texlive/) and [MiKTeX](https://miktex.org/download). [Overleaf appears to suggest MiKTeX for Windows](https://www.overleaf.com/learn/latex/Choosing_a_LaTeX_Compiler#TeX_distributions), however [this Stack Overflow answer states that MiKTeX is susceptible to simple viruses](https://tex.stackexchange.com/a/20415/266921), and TeX Live is also [strongly recommended](https://github.com/James-Yu/LaTeX-Workshop/wiki/Install#requirements) by the [Visual Studio Code LaTeX Workshop Extension](https://github.com/James-Yu/LaTeX-Workshop) (which I am using to automate compiling LaTeX documents into PDF), so I decided to go with TeX Live, which can be downloaded from [here](https://www.tug.org/texlive/).

## Useful links

- ["Learn LaTeX in 30 minutes" on Overleaf](https://www.overleaf.com/learn/latex/Learn_LaTeX_in_30_minutes)
- [CodeCogs equation editor (generates links to equations)](https://editor.codecogs.com/)
  - [Alternative CodeCogs equation editor](https://latex.codecogs.com/eqneditor/editor.php)

## Document template

The following is a sensible, minimal example of a document template for a `tex` document. It assumes:

- Sections are contained in dedicated `tex` files in a subdirectory called `Sections`
- Images are contained in a parallel directory called `Results`
- References are contained in a file in the current directory called `references.bib`

```latex
\documentclass{article}

\usepackage[a4paper, total={7in, 10in}]{geometry}

\usepackage{hyperref}
\usepackage{amsmath}
\usepackage{amsfonts}
\usepackage{subcaption}
\usepackage{parskip}
\usepackage{xcolor}
\usepackage{graphicx}
\graphicspath{{../Results/}}

\title{
    Main document title \\
    \large Document subtitle
}
\author{Jake Levi \\ University of Oxford}
\date{June 2023}

\begin{document}

\maketitle

\section{Introduction} \label{section:intro}
\input{Sections/Intro.tex}

\section{Related work}
\input{Sections/related_work.tex}

\section{Methods}
\input{Sections/methods.tex}

\section{Results}
\input{Sections/results.tex}

\section{Discussion}
\input{Sections/discussion.tex}

\bibliographystyle{plain}
\bibliography{references}

\appendix

\section{Additional results}\label{appendix:additional results}
\input{Sections/additional_results.tex}

\end{document}
```

## Compiling a PDF

If the above template is saved in a file called `report.tex`, and all the files that it includes exist and are valid `tex` files, then a PDF of the document can be created simply by saving the document in a VS Code window with the [Visual Studio Code LaTeX Workshop Extension](https://github.com/James-Yu/LaTeX-Workshop) installed.

Inspecting the `LaTeX Compiler` option of the VS Code `Output` pane reveals that the command performed when saving the document in VS Code is equivalent to performing the following command in a terminal open in the directory containing `report.tex`:

```
pdflatex -synctex=1 -interaction=nonstopmode -file-line-error -recorder  report.tex
```

Descriptions can be found online for the meanings of [`-file-line-error` and `-recorder`](https://linux.die.net/man/1/pdflatex), [`-synctex=1`](https://tex.stackexchange.com/a/118491/266921) and [-interaction=nonstopmode](https://tex.stackexchange.com/a/258816/266921).

## Compiling to PNG

Sometimes it is desirable to compile to an image (instead of a PDF), for example to produce an easily shareable [MRE](https://en.wikipedia.org/wiki/Minimal_reproducible_example) of some Latex code. This can be achieved using the `standalone` package, for example:

```tex
\documentclass[11pt, border=10pt, convert]{standalone}
\begin{document}
Blah blah blah
\end{document}
```

This can be compiled with the following command (assuming the above code is saved in a file called `mini.tex`, and the terminal is open in the same directory as `mini.tex`):

```
pdflatex -shell-escape mini.tex
```

- The compilation command above will fail if `standalone` can't find the appropriate conversion software on the system path
- The `standalone` package on Windows assumes the existence on the system path of a program called `imgconvert.exe`, which can be installed by the program Image Magick ([source](http://mirrors.ibiblio.org/CTAN/macros/latex/contrib/standalone/standalone.pdf))
- Image Magick is [freely available on Windows](https://www.imagemagick.org/script/download.php#windows), although it requires a manual installation process, and one of its dependencies is associated with a [security vulnerability](https://askubuntu.com/a/1081907/1078405)
- [The documentation for `standalone`](http://mirrors.ibiblio.org/CTAN/macros/latex/contrib/standalone/standalone.pdf) states that the conversion program Ghostscript can be used as an alternative to Image Magick, which is usually named `gswin32c` on Windows
- `gswin32c` appears to be installed by default with Tex Live, although its location in my current installation is `C:\texlive\2022\tlpkg\tlgs\bin\gswin32c.exe`, which is not on the system path
- Running the command `C:\texlive\2022\tlpkg\tlgs\bin\gswin32c.exe` raises the error `GPL Ghostscript 10.00.0: Can't find initialization file gs_init.ps.`
- `gs_init.ps` appears to be installed by default with Tex Live, located in my current installation at `C:\texlive\2022\tlpkg\tlgs\Resource\Init\gs_init.ps`, and additional paths can be specified to `gswin32c` using `-I` ([source](https://stackoverflow.com/a/12876349/8477566))
- Running the command `C:\texlive\2022\tlpkg\tlgs\bin\gswin32c.exe -I C:\texlive\2022\tlpkg\tlgs\Resource\Init` raises the errors `Warning: the map file cidfmap was not found` and `Can't find (or open) initialization file (kfwin32.ps)`
- `cidfmap` and `kfwin32.ps` appear to be installed by default with Tex Live, located in my current installation at `C:\texlive\2022\tlpkg\tlgs\lib\cidfmap` and `C:\texlive\2022\tlpkg\tlgs\kanji\kfwin32.ps` respectively
- Running the command `C:\texlive\2022\tlpkg\tlgs\bin\gswin32c.exe -I C:\texlive\2022\tlpkg\tlgs\Resource\Init -I C:\texlive\2022\tlpkg\tlgs\lib -I C:\texlive\2022\tlpkg\tlgs\kanji` appears to launch Ghostscript successfully
- Replacing the command `\documentclass[11pt, border=10pt, convert]{standalone}` in `mini.tex` with `\documentclass[11pt, border=10pt, convert={ghostscript, gsexe=C:\\texlive\\2022\\tlpkg\\tlgs\\bin\\gswin32c.exe -I C:\\texlive\\2022\\tlpkg\\tlgs\\Resource\\Init -I C:\\texlive\\2022\\tlpkg\\tlgs\\lib -I C:\\texlive\\2022\\tlpkg\\tlgs\\kanji}]{standalone}` and compiling with the command shown above successfully produces the output image `mini.png`

## Description of packages

Package name | Description
--- | ---
`geometry`    | *TODO*
`hyperref`    | *TODO*
`amsmath`     | *TODO*
`amsfonts`    | *TODO*
`subcaption`  | *TODO*
`parskip`     | *TODO*
`xcolor`      | *TODO*
`graphicx`    | *TODO*

## Maths formatting

### Underset text

To make text appear underneath an operator, use `\underset`, as in `$\underset{1 \leq j \leq n}{\max}$` (requires `amsmath` package, [source](https://tex.stackexchange.com/a/40217/266921)), EG:

![](https://latex.codecogs.com/svg.image?\underset{1&space;\leq&space;j&space;\leq&space;n}{\max}\left[&space;\frac{x_j}{y_j}&space;\right])

## Text formatting

### Use a fixed width font

Use the `courier` package and `\texttt` command, for example ([source](https://tex.stackexchange.com/a/24848/266921)):

```latex
\documentclass{article}
\usepackage{courier}
\begin{document}

This is not Courier font. \texttt{This is Courier font.}
\end{document}​​​​​​​​​​​​​​​​​​​​​​​​​​​​​​
```
